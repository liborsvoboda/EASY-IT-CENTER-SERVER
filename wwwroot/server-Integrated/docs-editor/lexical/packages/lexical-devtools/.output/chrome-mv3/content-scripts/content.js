var Cr=Object.defineProperty;var $r=(v,w,E)=>w in v?Cr(v,w,{enumerable:!0,configurable:!0,writable:!0,value:E}):v[w]=E;var ie=(v,w,E)=>($r(v,typeof w!="symbol"?w+"":w,E),E),we=(v,w,E)=>{if(!w.has(v))throw TypeError("Cannot "+E)};var z=(v,w,E)=>(we(v,w,"read from private field"),E?E.call(v):w.get(v)),L=(v,w,E)=>{if(w.has(v))throw TypeError("Cannot add the same private member more than once");w instanceof WeakSet?w.add(v):w.set(v,E)},Ke=(v,w,E,G)=>(we(v,w,"write to private field"),G?G.call(v,E):w.set(v,E),E);var ve=(v,w,E)=>(we(v,w,"access private method"),E);(function(){"use strict";var j,$,te,F,re,ne,Xe,se,Qe;function v(e){return e}var w,E=(e,t,r)=>w??(w=new Promise(n=>{const s=a=>{const{data:{cmd:o,scope:c,context:l},ports:A}=a;if(o==="webext-port-offer"&&c===t&&l!==e)return window.removeEventListener("message",s),A[0].onmessage=r,A[0].postMessage("port-accepted"),n(A[0])},i=()=>{const a=new MessageChannel;a.port1.onmessage=o=>{if(o.data==="port-accepted")return window.removeEventListener("message",s),n(a.port1);r==null||r(o)},window.postMessage({cmd:"webext-port-offer",context:e,scope:t},"*",[a.port2])};window.addEventListener("message",s),i()})),G=e=>{let t,r=!1,n,s;return{enable:()=>r=!0,onMessage:i=>n=i,postMessage:async i=>{if(!r)throw new Error("Communication with window has not been allowed");return et(t),(await s).postMessage(i)},setNamespace:i=>{if(t)throw new Error("Namespace once set cannot be changed");t=i,s=E(e,i,({data:a})=>n==null?void 0:n(a))}}};function et(e){if(typeof e!="string"||e.trim().length===0)throw new Error(`pegasus-transport uses window.postMessage to talk with other "window"(s) for message routingwhich is global/conflicting operation in case there are other scripts using pegasus-transport. Call initPegasusTransport({namespace}) (in window) or initPegasusTransport({allowWindowMessagingForNamespace}) (in content-script) to isolate your app. Example: setNamespace('com.facebook.react-devtools'). Make sure to use same namespace across all your scripts whereever window.postMessage is likely to be used\``)}const tt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],ae=Symbol(".toJSON was called"),rt=e=>{e[ae]=!0;const t=e.toJSON();return delete e[ae],t},Ee=({from:e,seen:t,to_:r,forceEnumerable:n,maxDepth:s,depth:i})=>{const a=r||(Array.isArray(e)?[]:{});if(t.push(e),i>=s)return a;if(typeof e.toJSON=="function"&&e[ae]!==!0)return rt(e);for(const[o,c]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(c)){a[o]="[object Buffer]";continue}if(c!==null&&typeof c=="object"&&typeof c.pipe=="function"){a[o]="[object Stream]";continue}if(typeof c!="function"){if(!c||typeof c!="object"){a[o]=c;continue}if(!t.includes(e[o])){i++,a[o]=Ee({from:e[o],seen:[...t],forceEnumerable:n,maxDepth:s,depth:i});continue}a[o]="[Circular]"}}for(const{property:o,enumerable:c}of tt)typeof e[o]=="string"&&Object.defineProperty(a,o,{value:e[o],enumerable:n?!0:c,configurable:!0,writable:!0});return a};function Se(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;return typeof e=="object"&&e!==null?Ee({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ce={exports:{}};const st=e=>typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?()=>{const t=crypto.getRandomValues(new Uint8Array(1))[0];return(t>=e?t%e:t).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),_e=(e=7,t=!1)=>Array.from({length:e},st(t?16:36)).join("");ce.exports=_e,ce.exports.default=_e;var ot=ce.exports;const V=J(ot);var it=(e,t,r)=>{const n=V(),s=new Map,i=async a=>{const o=a.hops.findIndex(c=>c.startsWith("background::"))!==-1;if(o){r==null||r(a);const{id:c}=a,l=[],A=s.get(c)??[];for(const f of A)try{await f({data:a.data,id:c,sender:a.origin,timestamp:a.timestamp})}catch(h){l.push(h)}if(l.length>0)throw new Error(`Error(s) occurred while handling broadcast event ${c}: ${l.map(f=>Se(f)).join(", ")}`);if(o)return}return a.hops.push(`${e}::${n}`),t(a)};return{emitBroadcastEvent:async(a,o)=>{const c={data:o,hops:[],id:a,messageType:"broadcastEvent",origin:{context:e,tabId:null},timestamp:Date.now(),transactionId:V()};return await i(c)},handleEvent:i,onBroadcastEvent:(a,o)=>{const c=s.get(a)??[];return s.set(a,[...c,o]),()=>{const l=s.get(a)??[];s.set(a,l.filter(A=>A!==o))}}}},at=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,ct=e=>{const[,t,r,n]=e.match(at)||[];return{context:t,frameId:n?+n:void 0,tabId:+r}},lt=(e,t,r)=>{const n=V(),s=new Map,i=new Map,a=o=>{if(o.destination.context===e&&!o.destination.frameId&&!o.destination.tabId){const{transactionId:c,id:l,messageType:A}=o,f=()=>{const y=s.get(c);if(y){const{err:b,data:T}=o;if(b){const I=b,D=self[I.name],oe=new(typeof D=="function"?D:Error)(I.message);for(const U in I)oe[U]=I[U];y.reject(oe)}else y.resolve(T);s.delete(c)}},h=async()=>{let y=null,b=null,T=!1;try{const I=i.get(l);if(typeof I=="function")y=await I({data:o.data,id:l,sender:o.origin,timestamp:o.timestamp});else throw T=!0,new Error(`[pegasus-transport] No handler registered in '${e}' to accept messages with id '${l}'`)}catch(I){b=I}finally{if(b&&(o.err=Se(b)),a({...o,data:y,destination:o.origin,hops:[],messageType:"reply",origin:{context:e,tabId:null}}),b&&!T)throw y}};switch(A){case"reply":return f();case"message":return h()}}return o.hops.push(`${e}::${n}`),t(o)};return{endTransaction:o=>{const c=s.get(o);c==null||c.reject("Transaction was ended before it could complete"),s.delete(o)},handleMessage:a,onMessage:(o,c)=>(i.set(o,c),()=>i.delete(o)),sendMessage:(o,c,l="background")=>{const A=typeof l=="string"?ct(l):l,f="Bridge#sendMessage ->";if(!A.context)throw new TypeError(`${f} Destination must be any one of known destinations`);return new Promise((h,y)=>{const b={data:c,destination:A,hops:[],id:o,messageType:"message",origin:{context:e,tabId:null},timestamp:Date.now(),transactionId:V()};s.set(b.transactionId,{reject:y,resolve:h});try{a(b)}catch(T){s.delete(b.transactionId),y(T)}})}}};function ut(e){return e.messageType==="broadcastEvent"}function gt(e){return e.messageType==="message"||e.messageType==="reply"}var le=class{static toBackground(e,t){return e.postMessage(t)}static toExtensionContext(e,t){return e.postMessage(t)}},dt=(e,t=["endpointName","fingerprint"])=>typeof e=="object"&&e!==null&&t.every(r=>r in e),mt=e=>{if(!dt(e))throw new TypeError("Invalid connection args");return JSON.stringify(e)},ft=()=>{let e=[];return{add:(...t)=>{e=[...e,...t]},entries:()=>e,remove:t=>{e=typeof t=="string"?e.filter(r=>r.message.transactionId!==t):e.filter(r=>!t.includes(r))}}},pt=()=>`uid::${V(7)}`;function Re(e,{eventRuntime:t,messageRuntime:r}){if(ut(e))t.handleEvent(e);else if(gt(e))r.handleMessage(e);else throw new TypeError("Unknown message type")}var Te={exports:{}};(function(e,t){(function(r,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:nt,function(r){var n,s;if(!((s=(n=globalThis.chrome)==null?void 0:n.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const i="The message port closed before a response was received.",a=o=>{const c={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(c).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class l extends WeakMap{constructor(g,p=void 0){super(p),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const A=u=>u&&typeof u=="object"&&typeof u.then=="function",f=(u,g)=>(...p)=>{o.runtime.lastError?u.reject(new Error(o.runtime.lastError.message)):g.singleCallbackArg||p.length<=1&&g.singleCallbackArg!==!1?u.resolve(p[0]):u.resolve(p)},h=u=>u==1?"argument":"arguments",y=(u,g)=>function(x,..._){if(_.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${h(g.minArgs)} for ${u}(), got ${_.length}`);if(_.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${h(g.maxArgs)} for ${u}(), got ${_.length}`);return new Promise((M,k)=>{if(g.fallbackToNoCallback)try{x[u](..._,f({resolve:M,reject:k},g))}catch(m){console.warn(`${u} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),x[u](..._),g.fallbackToNoCallback=!1,g.noCallback=!0,M()}else g.noCallback?(x[u](..._),M()):x[u](..._,f({resolve:M,reject:k},g))})},b=(u,g,p)=>new Proxy(g,{apply(x,_,M){return p.call(_,u,...M)}});let T=Function.call.bind(Object.prototype.hasOwnProperty);const I=(u,g={},p={})=>{let x=Object.create(null),_={has(k,m){return m in u||m in x},get(k,m,P){if(m in x)return x[m];if(!(m in u))return;let S=u[m];if(typeof S=="function")if(typeof g[m]=="function")S=b(u,u[m],g[m]);else if(T(p,m)){let B=y(m,p[m]);S=b(u,u[m],B)}else S=S.bind(u);else if(typeof S=="object"&&S!==null&&(T(g,m)||T(p,m)))S=I(S,g[m],p[m]);else if(T(p,"*"))S=I(S,g[m],p["*"]);else return Object.defineProperty(x,m,{configurable:!0,enumerable:!0,get(){return u[m]},set(B){u[m]=B}}),S;return x[m]=S,S},set(k,m,P,S){return m in x?x[m]=P:u[m]=P,!0},defineProperty(k,m,P){return Reflect.defineProperty(x,m,P)},deleteProperty(k,m){return Reflect.deleteProperty(x,m)}},M=Object.create(u);return new Proxy(M,_)},D=u=>({addListener(g,p,...x){g.addListener(u.get(p),...x)},hasListener(g,p){return g.hasListener(u.get(p))},removeListener(g,p){g.removeListener(u.get(p))}}),oe=new l(u=>typeof u!="function"?u:function(p){const x=I(p,{},{getContent:{minArgs:0,maxArgs:0}});u(x)}),U=new l(u=>typeof u!="function"?u:function(p,x,_){let M=!1,k,m=new Promise(q=>{k=function(C){M=!0,q(C)}}),P;try{P=u(p,x,k)}catch(q){P=Promise.reject(q)}const S=P!==!0&&A(P);if(P!==!0&&!S&&!M)return!1;const B=q=>{q.then(C=>{_(C)},C=>{let be;C&&(C instanceof Error||typeof C.message=="string")?be=C.message:be="An unexpected error occurred",_({__mozWebExtensionPolyfillReject__:!0,message:be})}).catch(C=>{console.error("Failed to send onMessage rejected reply",C)})};return B(S?P:m),!0}),kr=({reject:u,resolve:g},p)=>{o.runtime.lastError?o.runtime.lastError.message===i?g():u(new Error(o.runtime.lastError.message)):p&&p.__mozWebExtensionPolyfillReject__?u(new Error(p.message)):g(p)},Ze=(u,g,p,...x)=>{if(x.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${h(g.minArgs)} for ${u}(), got ${x.length}`);if(x.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${h(g.maxArgs)} for ${u}(), got ${x.length}`);return new Promise((_,M)=>{const k=kr.bind(null,{resolve:_,reject:M});x.push(k),p.sendMessage(...x)})},Pr={devtools:{network:{onRequestFinished:D(oe)}},runtime:{onMessage:D(U),onMessageExternal:D(U),sendMessage:Ze.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Ze.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},xe={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return c.privacy={network:{"*":xe},services:{"*":xe},websites:{"*":xe}},I(o,Pr,c)};r.exports=a(chrome)}else r.exports=globalThis.browser})})(Te);var At=Te.exports;const ue=J(At);var ht=(e="")=>{const t=pt();let r,n=[];const s=ft(),i=new Set,a=new Set,o=(l,A)=>{switch(l.status){case"undeliverable":n.some(f=>f.message.id===l.message.id)||(n=[...n,{message:l.message,resolvedDestination:l.resolvedDestination}]);return;case"deliverable":n=n.reduce((f,h)=>h.resolvedDestination===l.deliverableTo?(le.toBackground(A,{message:h.message,type:"deliver"}),f):[...f,h],[]);return;case"delivered":l.receipt.message.messageType==="message"&&s.add(l.receipt);return;case"incoming":l.message.messageType==="reply"&&s.remove(l.message.id),i.forEach(f=>f(l.message,A));return;case"terminated":{const f=s.entries().filter(h=>l.fingerprint===h.to);s.remove(f),f.forEach(({message:h})=>a.forEach(y=>y(h)))}}},c=()=>{r=ue.runtime.connect({name:mt({endpointName:e,fingerprint:t})}),r.onMessage.addListener(o),r.onDisconnect.addListener(c),le.toBackground(r,{pendingDeliveries:[...new Set(n.map(({resolvedDestination:l})=>l))],pendingResponses:s.entries(),type:"sync"})};return c(),{onFailure(l){a.add(l)},onMessage(l){i.add(l)},postMessage(l){le.toBackground(r,{message:l,type:"deliver"})}}},H=null;function yt(e){if(H!=null)throw new Error('Messaging API already set. Likely you called "initPegasusTransport" twice in the same context.');H=e}function Ie(){if(H==null)throw new Error(`Messaging API wan't set. Make sure you called "initPegasusTransport" within current context before using @webext-pegasus packages.`);return H}function xt({allowWindowMessagingForNamespace:e}={}){const t=G("content-script"),r=ht(),n=lt("content-script",async i=>{i.destination.context==="window"?await t.postMessage(i):r.postMessage(i)}),s=it("content-script",async i=>{r.postMessage(i)},async i=>t.postMessage(i));t.onMessage(i=>{if("type"in i&&"transactionID"in i)n.endTransaction(i.transactionID);else{const a=Object.assign({},i,{origin:{context:"window",tabId:null}});Re(a,{eventRuntime:s,messageRuntime:n})}}),r.onMessage(i=>Re(i,{eventRuntime:s,messageRuntime:n})),r.onFailure(i=>{if(i.origin.context==="window"){t.postMessage({transactionID:i.transactionId,type:"error"});return}n.endTransaction(i.transactionId)}),e&&(t.setNamespace(e),t.enable()),yt({browser:ue,emitBroadcastEvent:s.emitBroadcastEvent,onBroadcastEvent:s.onBroadcastEvent,onMessage:n.onMessage,sendMessage:n.sendMessage})}const bt="lexical-devtools";function wt(){const{onBroadcastEvent:e,emitBroadcastEvent:t}=Ie();return{emitBroadcastEvent:t,onBroadcastEvent:e}}function vt(){const{onMessage:e,sendMessage:t}=Ie();return{onMessage:e,sendMessage:t}}function Me(e,t,r){const n=()=>{},s=new Proxy(n,{apply(i,a,o){const{sendMessage:c}=vt();return c(e,{args:o,path:r??null},t)},get(i,a,o){return a==="__proxy"||typeof a=="symbol"?Reflect.get(i,a,o):Me(e,t,r==null?a:`${r}.${a}`)}});return s.__proxy=!0,s}function Et(e){return`pegasus-rpc-service.${e}`}function St(e,t){return Me(Et(e),t)}function _t(e,t){const r=Object.assign({},e);return t.forEach(({change:n,key:s,value:i})=>{switch(n){case"updated":r[s]=i;break;case"removed":Reflect.deleteProperty(r,s);break;default:console.warn(`Unknown change type ${n} for key ${s} (value: ${i})`)}}),r}var Rt=class{constructor({portName:e,state:t={},serializer:r,deserializer:n,patchStrategy:s=_t}){ie(this,"readyResolved",!1);this.readyPromise=new Promise(a=>this.readyResolve=a),this.serializer=r,this.deserializer=n,this.listeners=[],this.state=t,this.bridge=St(`PegasusStoreCommunicationBridgeFor-${e}`,"background");const{onBroadcastEvent:i}=wt();this.bridge.fetchState().then(a=>{var o;this.replaceState(n(a)),this.readyResolved||(this.readyResolved=!0,(o=this.readyResolve)==null||o.call(this))}).catch(a=>{console.error("Error initializing store: ",a)}),this.patchStrategy=s,i(`pegasusStore/${e}/chromex.state`,a=>{var o;this.replaceState(n(a.data)),this.readyResolved||(this.readyResolved=!0,(o=this.readyResolve)==null||o.call(this))}),i(`pegasusStore/${e}/chromex.patch_state`,a=>{this.patchState(n(a.data))}),this.dispatch=this.dispatch.bind(this)}ready(e=null){return e!==null?this.readyPromise.then(e):this.readyPromise}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}patchState(e){this.state=this.patchStrategy(this.state,e),this.listeners.forEach(t=>t())}replaceState(e){this.state=e,this.listeners.forEach(t=>t())}getState(){return this.state}async dispatch(e){return this.deserializer(await this.bridge.dispatch(this.serializer(e)))}};function Tt(){return{deserializer:r=>JSON.parse(r),serializer:r=>JSON.stringify(r)}}async function It(e,t){const r=Tt(),n=new Rt({...r,portName:e,state:t.getState()});await n.ready(),t.setState(n.getState());const s=(a,o)=>{n.dispatch({state:a,type:"__ZUSTAND_SYNC__"}).then(c=>{c||(i(),t.setState(o),i=t.subscribe(s))}).catch(c=>{if(c instanceof Error&&c.message==="Extension context invalidated."){console.warn("Webext-Zustand: Reloading page as we lost connection to background script..."),window.location.reload();return}console.error("Error during store dispatch",c)})};let i=t.subscribe(s);return n.subscribe(()=>{i(),t.setState(n.getState()),i=t.subscribe(s)}),t}var Mt={VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,MANIFEST_VERSION:3,BROWSER:"chrome",CHROME:!0,FIREFOX:!1,SAFARI:!1,EDGE:!1,OPERA:!1,COMMAND:"build",ENTRYPOINT:"content"};const ke=e=>{let t;const r=new Set,n=(A,f)=>{const h=typeof A=="function"?A(t):A;if(!Object.is(h,t)){const y=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(b=>b(t,y))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>l,subscribe:A=>(r.add(A),()=>r.delete(A)),destroy:()=>{(Mt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,s,c);return c},kt=e=>e?ke(e):ke;var Pe={exports:{}},d={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=Symbol.for("react.element"),Pt=Symbol.for("react.portal"),Ct=Symbol.for("react.fragment"),$t=Symbol.for("react.strict_mode"),Ot=Symbol.for("react.profiler"),Nt=Symbol.for("react.provider"),jt=Symbol.for("react.context"),Ft=Symbol.for("react.forward_ref"),Dt=Symbol.for("react.suspense"),Bt=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Ce=Symbol.iterator;function Vt(e){return e===null||typeof e!="object"?null:(e=Ce&&e[Ce]||e["@@iterator"],typeof e=="function"?e:null)}var $e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oe=Object.assign,Ne={};function O(e,t,r){this.props=e,this.context=t,this.refs=Ne,this.updater=r||$e}O.prototype.isReactComponent={},O.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},O.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function je(){}je.prototype=O.prototype;function ge(e,t,r){this.props=e,this.context=t,this.refs=Ne,this.updater=r||$e}var de=ge.prototype=new je;de.constructor=ge,Oe(de,O.prototype),de.isPureReactComponent=!0;var Fe=Array.isArray,De=Object.prototype.hasOwnProperty,me={current:null},Be={key:!0,ref:!0,__self:!0,__source:!0};function Le(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)De.call(t,n)&&!Be.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var c=Array(o),l=0;l<o;l++)c[l]=arguments[l+2];s.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:W,type:e,key:i,ref:a,props:s,_owner:me.current}}function Wt(e,t){return{$$typeof:W,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fe(e){return typeof e=="object"&&e!==null&&e.$$typeof===W}function Ut(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ve=/\/+/g;function pe(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ut(""+e.key):t.toString(36)}function Y(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case W:case Pt:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+pe(a,0):n,Fe(s)?(r="",e!=null&&(r=e.replace(Ve,"$&/")+"/"),Y(s,t,r,"",function(l){return l})):s!=null&&(fe(s)&&(s=Wt(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ve,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",Fe(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+pe(i,o);a+=Y(i,t,r,c,s)}else if(c=Vt(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+pe(i,o++),a+=Y(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Z(e,t,r){if(e==null)return e;var n=[],s=0;return Y(e,n,"","",function(i){return t.call(r,i,s++)}),n}function qt(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var R={current:null},K={transition:null},zt={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:K,ReactCurrentOwner:me};d.Children={map:Z,forEach:function(e,t,r){Z(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Z(e,function(){t++}),t},toArray:function(e){return Z(e,function(t){return t})||[]},only:function(e){if(!fe(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},d.Component=O,d.Fragment=Ct,d.Profiler=Ot,d.PureComponent=ge,d.StrictMode=$t,d.Suspense=Dt,d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zt,d.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Oe({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=me.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)De.call(t,c)&&!Be.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var l=0;l<c;l++)o[l]=arguments[l+2];n.children=o}return{$$typeof:W,type:e.type,key:s,ref:i,props:n,_owner:a}},d.createContext=function(e){return e={$$typeof:jt,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Nt,_context:e},e.Consumer=e},d.createElement=Le,d.createFactory=function(e){var t=Le.bind(null,e);return t.type=e,t},d.createRef=function(){return{current:null}},d.forwardRef=function(e){return{$$typeof:Ft,render:e}},d.isValidElement=fe,d.lazy=function(e){return{$$typeof:Lt,_payload:{_status:-1,_result:e},_init:qt}},d.memo=function(e,t){return{$$typeof:Bt,type:e,compare:t===void 0?null:t}},d.startTransition=function(e){var t=K.transition;K.transition={};try{e()}finally{K.transition=t}},d.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},d.useCallback=function(e,t){return R.current.useCallback(e,t)},d.useContext=function(e){return R.current.useContext(e)},d.useDebugValue=function(){},d.useDeferredValue=function(e){return R.current.useDeferredValue(e)},d.useEffect=function(e,t){return R.current.useEffect(e,t)},d.useId=function(){return R.current.useId()},d.useImperativeHandle=function(e,t,r){return R.current.useImperativeHandle(e,t,r)},d.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},d.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},d.useMemo=function(e,t){return R.current.useMemo(e,t)},d.useReducer=function(e,t,r){return R.current.useReducer(e,t,r)},d.useRef=function(e){return R.current.useRef(e)},d.useState=function(e){return R.current.useState(e)},d.useSyncExternalStore=function(e,t,r){return R.current.useSyncExternalStore(e,t,r)},d.useTransition=function(){return R.current.useTransition()},d.version="18.2.0",Pe.exports=d;var Ae=Pe.exports;const Gt=J(Ae);var We={exports:{}},Ue={},qe={exports:{}},ze={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N=Ae;function Jt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:Jt,Yt=N.useState,Zt=N.useEffect,Kt=N.useLayoutEffect,Xt=N.useDebugValue;function Qt(e,t){var r=t(),n=Yt({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return Kt(function(){s.value=r,s.getSnapshot=t,he(s)&&i({inst:s})},[e,r,t]),Zt(function(){return he(s)&&i({inst:s}),e(function(){he(s)&&i({inst:s})})},[e]),Xt(r),r}function he(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ht(e,r)}catch{return!0}}function er(e,t){return t()}var tr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?er:Qt;ze.useSyncExternalStore=N.useSyncExternalStore!==void 0?N.useSyncExternalStore:tr,qe.exports=ze;var rr=qe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X=Ae,nr=rr;function sr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var or=typeof Object.is=="function"?Object.is:sr,ir=nr.useSyncExternalStore,ar=X.useRef,cr=X.useEffect,lr=X.useMemo,ur=X.useDebugValue;Ue.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=ar(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=lr(function(){function c(y){if(!l){if(l=!0,A=y,y=n(y),s!==void 0&&a.hasValue){var b=a.value;if(s(b,y))return f=b}return f=y}if(b=f,or(A,y))return b;var T=n(y);return s!==void 0&&s(b,T)?b:(A=y,f=T)}var l=!1,A,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,s]);var o=ir(e,i[0],i[1]);return cr(function(){a.hasValue=!0,a.value=o},[o]),ur(o),o},We.exports=Ue;var gr=We.exports;const dr=J(gr);var Ge={VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,MANIFEST_VERSION:3,BROWSER:"chrome",CHROME:!0,FIREFOX:!1,SAFARI:!1,EDGE:!1,OPERA:!1,COMMAND:"build",ENTRYPOINT:"content"};const{useDebugValue:mr}=Gt,{useSyncExternalStoreWithSelector:fr}=dr;let Je=!1;const pr=e=>e;function Ar(e,t=pr,r){(Ge?"production":void 0)!=="production"&&r&&!Je&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Je=!0);const n=fr(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return mr(n),n}const He=e=>{(Ge?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?kt(e):e,r=(n,s)=>Ar(t,n,s);return Object.assign(r,t),r},hr=e=>e?He(e):He,yr=e=>(t,r,n)=>{const s=n.subscribe;return n.subscribe=(a,o,c)=>{let l=a;if(o){const A=(c==null?void 0:c.equalityFn)||Object.is;let f=a(n.getState());l=h=>{const y=a(h);if(!A(f,y)){const b=f;o(f=y,b)}},c!=null&&c.fireImmediately&&o(f,f)}return s(l)},e(t,r,n)},xr=hr()(yr(e=>({isSelecting:{},lexicalState:{},markTabAsRestricted:t=>e(r=>({lexicalState:{...r.lexicalState,[t]:null}})),selectedEditorKey:{},setIsSelecting:(t,r)=>e(n=>({isSelecting:{...n.isSelecting,[t]:r}})),setSelectedEditorKey:(t,r)=>e(n=>({selectedEditorKey:{...n.selectedEditorKey,[t]:r}})),setStatesForTab:(t,r)=>e(n=>({lexicalState:{...n.lexicalState,[t]:r}}))}))),br="ExtensionStore",wr=()=>It(br,xr);var ye=ue;function vr(e){const t=document.createElement("script");t.src=ye.runtime.getURL(e),t.type="module",t.onload=()=>t.remove(),(document.head||document.documentElement).append(t)}const Er={main(e){xt({allowWindowMessagingForNamespace:bt}),wr().then(()=>{vr("/injected.js")}).catch(console.error)},matches:["<all_urls>"],registration:"manifest",runAt:"document_end"};var Sr={VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,MANIFEST_VERSION:3,BROWSER:"chrome",CHROME:!0,FIREFOX:!1,SAFARI:!1,EDGE:!1,OPERA:!1,COMMAND:"build",ENTRYPOINT:"content"};function Q(e,...t){}var _r={debug:(...e)=>Q(console.debug,...e),log:(...e)=>Q(console.log,...e),warn:(...e)=>Q(console.warn,...e),error:(...e)=>Q(console.error,...e)},Rr=(j=class extends Event{constructor(t,r){super(j.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=r}},ie(j,"EVENT_NAME",Ye("wxt:locationchange")),j);function Ye(e){const t=typeof Sr>"u"?"build":"content";return`${ye.runtime.id}:${t}:${e}`}function Tr(e){let t,r;return{run(){t==null&&(r=new URL(location.href),t=e.setInterval(()=>{let n=new URL(location.href);n.href!==r.href&&(window.dispatchEvent(new Rr(n,r)),r=n)},1e3))}}}var Ir=($=class{constructor(t,r){L(this,ne);L(this,se);L(this,te,window.self===window.top);L(this,F,void 0);L(this,re,Tr(this));this.contentScriptName=t,this.options=r,Ke(this,F,new AbortController),z(this,te)&&ve(this,ne,Xe).call(this),this.setTimeout(()=>{ve(this,se,Qe).call(this)})}get signal(){return z(this,F).signal}abort(t){return z(this,F).abort(t)}get isInvalid(){return ye.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,r){const n=setInterval(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(t,r){const n=setTimeout(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(t){const r=requestAnimationFrame((...n)=>{this.isValid&&t(...n)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(t,r){const n=requestIdleCallback((...s)=>{this.signal.aborted||t(...s)},r);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(t,r,n,s){var i;r==="wxt:locationchange"&&this.isValid&&z(this,re).run(),(i=t.addEventListener)==null||i.call(t,r.startsWith("wxt:")?Ye(r):r,n,{...s,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),_r.debug(`Content script "${this.contentScriptName}" context invalidated`)}},te=new WeakMap,F=new WeakMap,re=new WeakMap,ne=new WeakSet,Xe=function(){window.postMessage({event:$.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")},se=new WeakSet,Qe=function(){const t=r=>{var n,s;((n=r.data)==null?void 0:n.type)===$.SCRIPT_STARTED_MESSAGE_TYPE&&((s=r.data)==null?void 0:s.contentScriptName)===this.contentScriptName&&this.notifyInvalidated()};addEventListener("message",t),this.onInvalidated(()=>removeEventListener("message",t))},ie($,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started"),$);function ee(e,...t){}var Mr={debug:(...e)=>ee(console.debug,...e),log:(...e)=>ee(console.log,...e),warn:(...e)=>ee(console.warn,...e),error:(...e)=>ee(console.error,...e)};(async()=>{try{const{main:e,...t}=Er,r=new Ir("content",t);await e(r)}catch(e){Mr.error('The content script "content" crashed on startup!',e)}})()})();
